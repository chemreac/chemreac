language: python
python:
- '2.7'
- '3.4'
before_install:
- ./scripts/install_miniconda.sh 2.7 $HOME/miniconda
- ./scripts/conda_create_test-env.sh 2.7 $HOME/miniconda
- mv /home/travis/miniconda/envs/test-env/bin/../lib/libm.so* /tmp/
- ./scripts/aptget.ubuntu.12.04LTS.sh
- ./scripts/install_sundials_w_lapack.sh
- mkdir -p $HOME/.config/matplotlib/
- cp ./scripts/matplotlibrc $HOME/.config/matplotlib/
install:
- source $HOME/miniconda/bin/activate test-env
- LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH DISTUTILS_DEBUG=1 python setup.py
  build_ext -i
script: LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH ./scripts/run_tests.sh
after_success:
- coveralls
- git config credential.helper "store --file=$HOME/git_credentials"
- echo "https://${GH_TOKEN}:@github.com" > $HOME/git_credentials
- echo ${BINSTAR_TOKEN} > $HOME/binstar_token
- LD_LIBRARY_PATH=/usr/local/lib:$LD_LIBRARY_PATH scripts/travis_after_success.sh
notifications:
  email: false
env:
  global:
    secure: "CBQSeuxYK0cKDjp1jxw+Rf8IoP0Tq0fissPmCW5XbZ/SkynLqDiFZL0S5GPnGTyWxy1i+1ahpsKl2f8P+aKn4rof6ndba2yc94c5lTLOiDOJ50iRo6j/3WUbaCs48bcRxdoqF7cnpIOpPbwWTX0cGTVXdBpf0TjYN43MFEqBfYw="
    secure: "FU2KD4srb2WbGuXE60GeHg8jb/HFAfynE/BsR/q5NT6DG7BdGBWFplvv5k9T4uzAM8wFL3dWMqT+zRct/8v9nv2VCyCX/jtfS8Tj3q73xdkZ+j7ksGBiJUvsj/udOTYOsQuxDgV6MIbIwtzcuKRRXo5yY9NMr4mB0D6EFRol+8E="
